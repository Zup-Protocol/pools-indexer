enum PoolType {
  V2
  V3
  V4
}

type DeFiPoolData {
  id: ID!
  poolsCount: Int!
  startedAtTimestamp: BigInt!
}

type DeFiPoolDailyData {
  id: ID!
  liquidityVolumeUSD: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  dayStartTimestamp: BigInt! @index
}

type DeFiPoolHourlyData {
  id: ID!
  liquidityVolumeUSD: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  hourStartTimestamp: BigInt! @index
}

type Token {
  id: ID!
  tokenAddress: String! @index
  usdPrice: BigDecimal!
  mostLiquidPool: Pool!
  decimals: Int!
  totalValuePooledUsd: BigDecimal! @index
  totalTokenPooledAmount: BigDecimal!
  swapVolumeUSD: BigDecimal! @index
  tokenSwapVolume: BigDecimal!
  liquidityVolumeUSD: BigDecimal! @index
  tokenLiquidityVolume: BigDecimal!
  symbol: String!
  name: String!
  chainId: Int! @index
}

type Pool {
  id: ID!
  token0: Token! @index
  token1: Token! @index
  poolAddress: String! @index
  currentFeeTier: Int!
  initialFeeTier: Int!
  positionManager: Bytes!
  totalValueLockedUSD: BigDecimal! @index
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeUSD: BigDecimal! @index
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  liquidityVolumeUSD: BigDecimal! @index
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  createdAtTimestamp: BigInt!
  hourlyData: [PoolHourlyData!]! @derivedFrom(field: "pool")
  dailyData: [PoolDailyData!]! @derivedFrom(field: "pool")
  protocol: Protocol! @index
  poolType: PoolType! @index
  isStablePool: Boolean
  v4PoolData: V4PoolData
  v3PoolData: V3PoolData
  v2PoolData: V2PoolData
  algebraPoolData: AlgebraPoolData
  chainId: Int! @index
}

type V2PoolData {
  id: ID!
}

type V3PoolData {
  id: ID!
  tick: BigInt!
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
}

type V4PoolData {
  id: ID!
  hooks: Bytes!
  tick: BigInt!
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
  permit2: Bytes!
  poolManager: Bytes!
  stateView: Bytes
}

type AlgebraPoolData {
  id: ID!
  deployer: String!
  communityFee: Int!
}

type PoolHourlyData {
  id: ID!
  pool: Pool!
  feesUSD: BigDecimal! @index
  feesToken0: BigDecimal!
  feesToken1: BigDecimal!
  hourStartTimestamp: BigInt! @index
  totalValueLockedUSD: BigDecimal! @index
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  swapVolumeUSD: BigDecimal! @index
  liquidityVolumeUSD: BigDecimal! @index
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  liquidityNetInflowUSD: BigDecimal! @index
  liquidityNetInflowToken0: BigDecimal!
  liquidityNetInflowToken1: BigDecimal!
  liquidityInflowUSD: BigDecimal! @index
  liquidityInflowToken0: BigDecimal!
  liquidityInflowToken1: BigDecimal!
  liquidityOutflowUSD: BigDecimal! @index
  liquidityOutflowToken0: BigDecimal!
  liquidityOutflowToken1: BigDecimal!
}

type PoolDailyData {
  id: ID!
  pool: Pool!
  feesUSD: BigDecimal! @index
  feesToken0: BigDecimal!
  feesToken1: BigDecimal!
  dayStartTimestamp: BigInt! @index
  totalValueLockedUSD: BigDecimal! @index
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  swapVolumeUSD: BigDecimal! @index
  liquidityVolumeUSD: BigDecimal! @index
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  liquidityNetInflowUSD: BigDecimal! @index
  liquidityNetInflowToken0: BigDecimal!
  liquidityNetInflowToken1: BigDecimal!
  liquidityInflowUSD: BigDecimal! @index
  liquidityInflowToken0: BigDecimal!
  liquidityInflowToken1: BigDecimal!
  liquidityOutflowUSD: BigDecimal! @index
  liquidityOutflowToken0: BigDecimal!
  liquidityOutflowToken1: BigDecimal!
}

type Protocol {
  id: String!
  name: String!
  logo: String!
  url: String!
  pools: [Pool!]! @derivedFrom(field: "protocol")
}
