import type { BigDecimal, Pool } from "generated";
import type { PoolType_t } from "generated/src/db/Enums.gen";
import { ZERO_BIG_DECIMAL, ZERO_BIG_INT } from "../../src/core/constants";
import { EntityId } from "../../src/core/entity/entity-id";

export class PoolMock implements Pool {
  constructor(params: Partial<Pool> = {}) {
    this.chainId = params.chainId ?? 1;
    this.poolAddress = params.poolAddress ?? "0x0";
    this.id = params.id ?? EntityId.fromAddress(this.chainId, this.poolAddress);

    this.lastActivityBlock = params.lastActivityBlock ?? 0n;
    this.createdAtBlock = params.createdAtBlock ?? 0n;
    this.createdAtTimestamp = params.createdAtTimestamp ?? 0n;
    this.lastActivityTimestamp = params.lastActivityTimestamp ?? 0n;
    this.lastStatsRefreshTimestamp = params.lastStatsRefreshTimestamp ?? 0n;

    this.token0_id = params.token0_id ?? "";
    this.token1_id = params.token1_id ?? "";
    this.rawCurrentFeeTier = params.rawCurrentFeeTier ?? 0;
    this.rawInitialFeeTier = params.rawInitialFeeTier ?? 0;
    this.currentFeeTierPercentage = params.currentFeeTierPercentage ?? 0;
    this.initialFeeTierPercentage = params.initialFeeTierPercentage ?? 0;
    this.positionManager = params.positionManager ?? "";
    this.protocol_id = params.protocol_id ?? "";
    this.poolType = params.poolType ?? "V3";
    this.isDynamicFee = params.isDynamicFee ?? false;

    this.v4PoolData_id = params.v4PoolData_id ?? this.id;
    this.v3PoolData_id = params.v3PoolData_id ?? this.id;
    this.algebraPoolData_id = params.algebraPoolData_id ?? this.id;
    this.slipstreamPoolData_id = params.slipstreamPoolData_id ?? this.id;

    this.totalStats24h_id = params.totalStats24h_id ?? EntityId.build24hStatsId(this.chainId, this.poolAddress);
    this.totalStats7d_id = params.totalStats7d_id ?? EntityId.build7dStatsId(this.chainId, this.poolAddress);
    this.totalStats30d_id = params.totalStats30d_id ?? EntityId.build30dStatsId(this.chainId, this.poolAddress);
    this.totalStats90d_id = params.totalStats90d_id ?? EntityId.build90dStatsId(this.chainId, this.poolAddress);

    this.totalValueLockedUsd = params.totalValueLockedUsd ?? ZERO_BIG_DECIMAL;
    this.totalValueLockedToken0 = params.totalValueLockedToken0 ?? ZERO_BIG_DECIMAL;
    this.totalValueLockedToken1 = params.totalValueLockedToken1 ?? ZERO_BIG_DECIMAL;
    this.totalValueLockedToken0Usd = params.totalValueLockedToken0Usd ?? ZERO_BIG_DECIMAL;
    this.totalValueLockedToken1Usd = params.totalValueLockedToken1Usd ?? ZERO_BIG_DECIMAL;
    this.trackedTotalValueLockedUsd = params.trackedTotalValueLockedUsd ?? ZERO_BIG_DECIMAL;
    this.trackedTotalValueLockedToken0Usd = params.trackedTotalValueLockedToken0Usd ?? ZERO_BIG_DECIMAL;
    this.trackedTotalValueLockedToken1Usd = params.trackedTotalValueLockedToken1Usd ?? ZERO_BIG_DECIMAL;
    this.accumulatedYield = params.accumulatedYield ?? ZERO_BIG_DECIMAL;
    this.feesUsd = params.feesUsd ?? ZERO_BIG_DECIMAL;
    this.feesToken0 = params.feesToken0 ?? ZERO_BIG_DECIMAL;
    this.feesToken1 = params.feesToken1 ?? ZERO_BIG_DECIMAL;
    this.trackedFeesUsd = params.trackedFeesUsd ?? ZERO_BIG_DECIMAL;
    this.swapVolumeUsd = params.swapVolumeUsd ?? ZERO_BIG_DECIMAL;
    this.swapVolumeToken0 = params.swapVolumeToken0 ?? ZERO_BIG_DECIMAL;
    this.swapVolumeToken1 = params.swapVolumeToken1 ?? ZERO_BIG_DECIMAL;
    this.swapVolumeToken0Usd = params.swapVolumeToken0Usd ?? ZERO_BIG_DECIMAL;
    this.swapVolumeToken1Usd = params.swapVolumeToken1Usd ?? ZERO_BIG_DECIMAL;
    this.trackedSwapVolumeUsd = params.trackedSwapVolumeUsd ?? ZERO_BIG_DECIMAL;
    this.trackedSwapVolumeToken0Usd = params.trackedSwapVolumeToken0Usd ?? ZERO_BIG_DECIMAL;
    this.trackedSwapVolumeToken1Usd = params.trackedSwapVolumeToken1Usd ?? ZERO_BIG_DECIMAL;
    this.liquidityVolumeUsd = params.liquidityVolumeUsd ?? ZERO_BIG_DECIMAL;
    this.liquidityVolumeToken0 = params.liquidityVolumeToken0 ?? ZERO_BIG_DECIMAL;
    this.liquidityVolumeToken1 = params.liquidityVolumeToken1 ?? ZERO_BIG_DECIMAL;
    this.liquidityVolumeToken0Usd = params.liquidityVolumeToken0Usd ?? ZERO_BIG_DECIMAL;
    this.liquidityVolumeToken1Usd = params.liquidityVolumeToken1Usd ?? ZERO_BIG_DECIMAL;
    this.trackedLiquidityVolumeUsd = params.trackedLiquidityVolumeUsd ?? ZERO_BIG_DECIMAL;
    this.trackedLiquidityVolumeToken0Usd = params.trackedLiquidityVolumeToken0Usd ?? ZERO_BIG_DECIMAL;
    this.trackedLiquidityVolumeToken1Usd = params.trackedLiquidityVolumeToken1Usd ?? ZERO_BIG_DECIMAL;
    this.liquidityNetInflowUsd = params.liquidityNetInflowUsd ?? ZERO_BIG_DECIMAL;
    this.trackedLiquidityNetInflowUsd = params.trackedLiquidityNetInflowUsd ?? ZERO_BIG_DECIMAL;
    this.swapsCount = params.swapsCount ?? ZERO_BIG_INT;
    this.tokens0PerToken1 = params.tokens0PerToken1 ?? ZERO_BIG_DECIMAL;
    this.tokens1PerToken0 = params.tokens1PerToken0 ?? ZERO_BIG_DECIMAL;
    this.token0UsdPrice = params.token0UsdPrice ?? ZERO_BIG_DECIMAL;
    this.token1UsdPrice = params.token1UsdPrice ?? ZERO_BIG_DECIMAL;
    this.trackedToken0UsdPrice = params.trackedToken0UsdPrice ?? ZERO_BIG_DECIMAL;
    this.trackedToken1UsdPrice = params.trackedToken1UsdPrice ?? ZERO_BIG_DECIMAL;
  }

  readonly id: string;
  readonly poolAddress: string;
  readonly token0_id: string;
  readonly token1_id: string;
  readonly rawCurrentFeeTier: number;
  readonly rawInitialFeeTier: number;
  readonly currentFeeTierPercentage: number;
  readonly initialFeeTierPercentage: number;
  readonly positionManager: string;
  readonly protocol_id: string;
  readonly poolType: PoolType_t;
  readonly v4PoolData_id: string | undefined;
  readonly v3PoolData_id: string | undefined;
  readonly algebraPoolData_id: string | undefined;
  readonly slipstreamPoolData_id: string | undefined;
  readonly chainId: number;
  readonly isDynamicFee: boolean;
  readonly createdAtBlock: bigint;
  readonly createdAtTimestamp: bigint;
  readonly lastActivityBlock: bigint;
  readonly lastActivityTimestamp: bigint;
  readonly lastStatsRefreshTimestamp: bigint;
  readonly totalValueLockedUsd: BigDecimal;
  readonly totalValueLockedToken0: BigDecimal;
  readonly totalValueLockedToken1: BigDecimal;
  readonly totalValueLockedToken0Usd: BigDecimal;
  readonly totalValueLockedToken1Usd: BigDecimal;
  readonly trackedTotalValueLockedUsd: BigDecimal;
  readonly trackedTotalValueLockedToken0Usd: BigDecimal;
  readonly trackedTotalValueLockedToken1Usd: BigDecimal;
  readonly accumulatedYield: BigDecimal;
  readonly feesUsd: BigDecimal;
  readonly feesToken0: BigDecimal;
  readonly feesToken1: BigDecimal;
  readonly trackedFeesUsd: BigDecimal;
  readonly swapVolumeUsd: BigDecimal;
  readonly swapVolumeToken0: BigDecimal;
  readonly swapVolumeToken1: BigDecimal;
  readonly swapVolumeToken0Usd: BigDecimal;
  readonly swapVolumeToken1Usd: BigDecimal;
  readonly trackedSwapVolumeUsd: BigDecimal;
  readonly trackedSwapVolumeToken0Usd: BigDecimal;
  readonly trackedSwapVolumeToken1Usd: BigDecimal;
  readonly liquidityVolumeUsd: BigDecimal;
  readonly liquidityVolumeToken0: BigDecimal;
  readonly liquidityVolumeToken1: BigDecimal;
  readonly liquidityVolumeToken0Usd: BigDecimal;
  readonly liquidityVolumeToken1Usd: BigDecimal;
  readonly trackedLiquidityVolumeUsd: BigDecimal;
  readonly trackedLiquidityVolumeToken0Usd: BigDecimal;
  readonly trackedLiquidityVolumeToken1Usd: BigDecimal;
  readonly liquidityNetInflowUsd: BigDecimal;
  readonly trackedLiquidityNetInflowUsd: BigDecimal;
  readonly totalStats24h_id: string;
  readonly totalStats7d_id: string;
  readonly totalStats30d_id: string;
  readonly totalStats90d_id: string;
  readonly swapsCount: bigint;
  readonly tokens0PerToken1: BigDecimal;
  readonly tokens1PerToken0: BigDecimal;
  readonly token0UsdPrice: BigDecimal;
  readonly token1UsdPrice: BigDecimal;
  readonly trackedToken0UsdPrice: BigDecimal;
  readonly trackedToken1UsdPrice: BigDecimal;
}
